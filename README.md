# IoT 봇넷 탐지 ahepf 개발
## 1. 프로젝트 개요
본 프로젝트는 급증하는 IoT 기기 및 이와 관련된 보안 위협, 특히 IoT 봇넷 공격에 대응하기 위한 AI 기반 탐지 및 방어 시스템 개발을 목표로 합니다. 전자공학과, 핀테크학과, 산업보안학과 학생들이 협력하여 네트워크 보안 및 AI에 대한 도메인 지식을 활용, AI 모델을 개발했습니다.

## 2. 프로젝트 목표
- 네트워크 보안 및 AI 분야에 대한 학습을 바탕으로 한 주제 선정 및 심층 학습.
- 학습된 도메인 지식을 활용한 AI 모델 개발.
- IoT 환경의 특성을 고려한 효과적인 봇넷 탐지 시스템 구현.

## 3. IoT 개요, 보안 위협 및 공격 탐지 시스템
IoT는 인터넷 연결을 통해 데이터를 주고받고 원격 제어를 가능하게 하는 기술로, 스마트 홈 등 다양한 분야에 활용됩니다. 그러나 개인정보 침해, 인명 피해, 금전적 손해와 같은 보안 위협을 동반하며 , 저성능 기기 특성 및 OS 부재로 취약성이 존재합니다.

주요 IoT 취약점은 다음과 같습니다:
- 네트워크 취약점: 통신 구간 악용 (예: Parrot AR 드론 패킷 하이재킹 , 지프차 해킹 ).
- 디바이스 취약점: 불법 하드웨어 삽입을 통한 악성코드 유포 및 정보 탈취 (예: 중국산 전기다리미 및 주전자 내 해킹용 칩 발견).
- 플랫폼/서비스 취약점: 소프트웨어 업데이트 시스템 해킹 및 랜섬웨어 감염 (예: ASUS SW 업데이트 시스템 해킹 , 스마트워치 랜섬웨어 감염 , CloudPets 데이터 유출 ).

봇넷(Botnet)은 동일 악성코드에 감염된 컴퓨팅 장치들이 중앙 통제 하에 위협을 가하는 네트워크입니다. IoT 기기의 취약점과 방대한 수가 봇넷 위협을 증폭시킵니다. 대표적인 피해 사례로는 미라이(Mirai) 봇넷을 이용한 대규모 디도스(DDoS) 공격으로 인한 미국 인터넷 마비 , 국내외 Mozi 봇넷 감염 , 그리고 신종 RapperBot 봇넷 등이 있습니다.

IoT 공격 탐지 시스템은 분산된 네트워크 환경에서 엣지 디바이스의 자원 제약을 고려한 경량 탐지 기법과 확장성이 요구됩니다. 본 프로젝트에서는 실제와 유사한 IoT 네트워크 트래픽 및 다양한 공격 정보를 포함한 Bot-IoT 데이터셋을 활용하여 봇넷 탐지 시스템을 구축했습니다.

### Data Set
- https://research.unsw.edu.au/projects/bot-iot-dataset


## 4. 데이터 전처리 및 정규화
- 결측치 제거: sport, dport, smac, dmac, soui, doui, sco, dco 컬럼에서 결측치를 처리했습니다. 특히 sport와 dport의 경우 arp, igmp, rarp 프로토콜일 때 NULL이므로 -1로 설정했습니다.

- 불필요한 컬럼 제거: 데이터셋이 인공적으로 생성된 공격 데이터이므로 실제 네트워크와 관련 없는 pkSeqID, saddr, daddr, stime, ltime 컬럼을 제거했습니다.

- 포트 번호 범주화: ICMP의 경우 포트 번호가 아닌 핑(PING) 포트 번호가 저장되어 있어, 0-1023(Well-Known), 1024-49151(Registered), 49152-65535(Dynamic)의 일반적인 포트 범위에 따라 범주형으로 변환했습니다.

- 범주형 데이터 수치화: 'category' 컬럼과 같은 범주형 특성들은 sklearn.preprocessing의 LabelEncoder를 사용하여 수치형 데이터로 변환했습니다.

- 수치형 데이터 정규화: 수치형 데이터들의 값 범위가 달라 발생할 수 있는 데이터 불균형을 해소하기 위해 StandardScaler를 사용하여 평균이 0이고 분산이 1인 정규분포로 변환했습니다.

## 5. AI 알고리즘 선정 및 학습/평가
- 알고리즘 선정:
KNN, Naïve Bayes, Random Forest 3가지 알고리즘을 비교 검토했습니다. KNN과 Naïve Bayes는 상대적으로 제약이 많고, KNN은 높은 컴퓨팅 파워를 요구하며 모델을 생성하지 않아 학습을 반복해야 하는 단점이 있습니다. 정보보호 분야에서는 특성 및 목적을 고려할 때 Random Forest가 일반적으로 좋은 성능을 보여줍니다.

- 학습 및 평가:
Random Forest Classifier 모델을 사용하여 학습 및 평가를 진행했습니다.

- 정확도: 0.9994로 높은 예측 정확도를 보였습니다. 특히 DDoS, DoS, Data Theft 공격에 대한 탐지 성능이 99% 이상으로 확인되었습니다.

- 혼동 행렬(Confusion Matrix): Confusion Matrix 분석 결과, Normal 트래픽과 Data Theft 공격에 대한 탐지 성능이 다소 낮게 나타났는데, 이는 희소 클래스의 문제 또는 과적합으로 해석될 수 있습니다.

- 특성 중요도(Feature Importance): dport, sbytes, bytes, dur, rate 등이 상위 중요한 특성으로 나타났습니다.




## 6. 개선 방향
- 최적 하이퍼 파라미터 튜닝: GridSearchCV를 활용하여 n_estimators, max_depth 등 모델의 최적 하이퍼 파라미터를 찾아 예측 정확도를 더욱 향상시킬 계획입니다.

- 특성 수 축소: 특성 중요도 분석 결과를 기반으로 불필요한 특성의 수를 줄여 모델의 경량화 및 속도 개선을 추구합니다.
  
- 도메인 지식 활용을 통한 특성 추출: 도메인 지식을 심화 학습하여 데이터로부터 추가적인 의미 있는 특성을 추출하는 방안을 모색합니다.
  
- 데이터 불균형 문제 해결: 현재 데이터의 불균형 문제가 성능에 영향을 미치므로, 더 많은 데이터 확보 또는 오버샘플링/언더샘플링 기법 적용을 통해 데이터 균형을 맞추는 작업을 진행할 예정입니다.